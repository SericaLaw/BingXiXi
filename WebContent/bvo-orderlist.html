<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
    </head>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/ace.min.css">
    <link rel="stylesheet" href="css/ace-skins.min.css">
    <link rel="stylesheet" href="css/ace-responsive.min.css">
  <style>
    body,html{
      width: 100%;
      height: 100%;
      background: #fff;
    }

    .info div{
        float: right;
    }

  </style>
    <body>
<div id="main-content" class="clearfix">
<div id="page-content" class="clearfix">

    <div class="page-header position-relative">
      <h1 style="color: #2679b5;">借卖方<small><i class="icon-double-angle-right"></i> 订单管理</small></h1>
    </div>
  <form class="form-search">
    Title：
    <input type="text" id="search-keyword" class="input-medium search-query">
    <button id="search" class="btn btn-purple btn-small">Search <i class="icon-search icon-on-right"></i></button>
  </form>
  <!-- <a href="#" class="btn  btn-success"  style="margin-bottom: 30px">
    <i class="icon-refresh"></i>
    Pull Orders
  </a> -->

<div class="tabbable">
      <ul class="nav nav-tabs" id="myTab">
        <li class="active"><a data-toggle="tab" href="#AwaitingPayment"> Awaiting Payment</a></li>
        <li class=""><a data-toggle="tab" href="#AwaitingShipment"> Awaiting Shipment</a></li>
        <li class=""><a data-toggle="tab" href="#shipped">Shiped</a></li>
        <li class=""><a data-toggle="tab" href="#complete">Completed Orders</a></li>
        <li class=""><a data-toggle="tab" href="#canceled">Cancelled Orders</a></li>
      </ul>
      <div class="tab-content">
        <div id="AwaitingPayment" class="tab-pane active">
          <p>
          <table id="table_bug_report" class="table table-striped table-bordered table-hover">
          <thead>
            <tr>
           
            <th>Title</th>
            <th>Price</th>
            <th class="hidden-480">QTY</th>
            <th>Sku</th>
            <th class="hidden-480">Order No</th>
            <th class="hidden-480">Total</th>
            <th> </th>
            </tr>
          </thead>

          <tbody id="awaiting-payment-body">
            <!-- <tr>
             
              <td><a href="bvo-goodsdetail.html">max.com</a></td>
              <td>$60</td>
              <td class="hidden-480">400</td>
              <td class="hidden-phone">Q8976511</td>
              <td class="hidden-480">4,400</td>
              <td>$500</td>
              <td>
                 <a href="bvo-orderPayment.html">Pay Now</a>
              </td>
            </tr>


            <tr>
              <td><a href="bvo-goodsdetail.html">best.com</a></td>
              <td>$75</td>
              <td class="hidden-480">6,500</td>
              <td class="hidden-phone">GM9012203</td>
              <td class="hidden-480">OD23336500</td>
              <td>$5678</td>
              <td>
                 <a href="bvo-orderPayment.html">Pay Now</a>
              </td>
            </tr>


            <tr>
              <td><a href="bvo-goodsdetail.html">pro.com</a></td>
              <td>$55</td>
              <td class="hidden-480">4,250</td>
              <td class="hidden-phone">GM775332</td>
              <td class="hidden-480">T4536476250</td>
              <td>$6788</td>
              <td>
                  <a href="bvo-orderPayment.html">Pay Now</a>
              </td>
            </tr> -->

                  </tbody>
            </table>
          </p>
        </div>
        <div id="AwaitingShipment" class="tab-pane">
          <p>
          <table id="table_bug_report" class="table table-striped table-bordered table-hover">
          <thead>
            <tr>
            <th>Title</th>
            <th>Price</th>
            <th class="hidden-480">QTY</th>
            <th>Sku</th>
            <th>Order No</th>
            <th class="hidden-480">Total</th>

            </tr>
          </thead>

          <tbody id="awaiting-shipment-body">
                  </tbody>
            </table>
          </p>
        </div>
        <div id="shipped" class="tab-pane">
          <p>
            <table id="table_bug_report" class="table table-striped table-bordered table-hover">
              <thead>
                <tr>
                 
                  <th>Title</th>
                  <th>Price</th>
                  <th>QTY</th>
                  <th>Sku</th>
                  <th>Total</th>
                  <th>Order No</th>
                  <th>Tracking No</th>

                </tr>
              </thead>

              <tbody id="shipped-body">

              </tbody>
            </table>
          </p>
        </div>
       <div id="complete" class="tab-pane">
          <p>
            <table id="table_bug_report" class="table table-striped table-bordered table-hover">
              <thead>
                <tr>
                  <th>Title</th>
                  <th>Price</th>
                  <th>QTY</th>
                  <th>Sku</th>
                  <th>Total</th>
                  <th>Order No</th>
                  <th>Tracking No</th>

                </tr>
              </thead>

              <tbody id="completed-orders-body">

           
                      </tbody>
            </table>
          </p>
        </div>
         <div id="canceled" class="tab-pane">
          <p>
            <table id="table_bug_report" class="table table-striped table-bordered table-hover">
              <thead>
                <tr>
                  <th>Title</th>
                  <th>Price</th>
                  <th class="hidden-480">QTY</th>
                  <th>	Sku</th>
                  <th class="hidden-480">Total</th>
                  <th class="hidden-480">Order No</th>
                </tr>
              </thead>

              <tbody id="cancelled-orders-body">
            
              </tbody>
            </table>
          </p>
        </div>
      </div>
  </div>
  </div></div>

    <script src="js/jquery-1.9.1.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>
      function pay(orderNo, qty, total) {
        window.location.href = "bvo-orderPayment.html?qty=" + qty + "&total=" + total
      }
      $("#search").click(function(e) {
        e.preventDefault();
        var keyword = $("#search-keyword").val();
        if (keyword == "") {
        	$("table tbody tr")
            .hide()
            .show();
        }
        else {
        	 $("table tbody tr")
             .hide()
             .filter(":contains('"+keyword+"')")
             .show();
        }
      })
      $(function(){
        // get awaiting payment
        $.get("borrowOrderManage.index", function(data) {
          data = JSON.parse(data);
          // data = [
          //   {
          //     "title": "max.com",
          //     "price": 60,
          //     "QTY": 400,
          //     "sku": "Q8976511",
          //     "orderNo": "4400",
          //     "total": 500
          //   },
          //   {
          //     "title": "best.com",
          //     "price": 75,
          //     "QTY": 6500,
          //     "sku": "GM9012203",
          //     "orderNo": "OD23336500",
          //     "total": 5678
          //   }
          // ]
          var content_html = "";
          for (var i = 0, n = data.length; i < n; ++i) {
            var item = data[i];
            content_html +=  `<tr><td><a href="bvo-goodsdetail.html">`
            + item.name + `</a></td><td>$` + item.price + `</td><td class="hidden-480">`
            + item.number + `</td><td class="hidden-phone">` + item.sku + `</td><td class="hidden-480">` + item.id + `</td><td>$` + item.number * item.price 
            + `</td><td><a href="#" onclick='pay("` 
            + item.id + `",` + item.number + `,` + item.number * item.price 
            + `)'>Pay Now</a></td></tr>`
          }
          $("#awaiting-payment-body").html(content_html);
          
        })
        // get awaiting shipment
        $.get("awaitingShipment.borrow", function(data) {
          //         data = [
          //   {
          //     "title": "max.com",
          //     "price": 60,
          //     "QTY": 400,
          //     "sku": "Q8976511",
          //     "orderNo": "4400",
          //     "total": 500
          //   },
          //   {
          //     "title": "best.com",
          //     "price": 75,
          //     "QTY": 6500,
          //     "sku": "GM9012203",
          //     "orderNo": "OD23336500",
          //     "total": 5678
          //   }
          // ]
          data = JSON.parse(data)
          var content_html = "";
          for (var i = 0, n = data.length; i < n; ++i) {
            var item = data[i];
            content_html +=  `<tr><td><a href="bvo-goodsdetail.html">`
            + item.title + `</a></td><td>$` + item.price + `</td><td class="hidden-480">`
            + item.number + `</td><td class="hidden-phone">` + item.sku + `</td><td class="hidden-480">` + item.id + `</td><td>$` + item.number * item.price + `</td></tr>`
          }
          $("#awaiting-shipment-body").html(content_html);
          
        })

        // get shiped
        $.get("shiped.borrow", function(data, status) {
          data = JSON.parse(data)
        //   var data = [
        //   {
        //     "title": "ace.com",
        //     "price": 45,
        //     "QTY": 3,
        //     "sku": "Gm7643377",
        //     "orderNo": "546738788",
        //     "total": 135,
        //     "trackingno": "46578990890"
        //   }
        // ]
          var content_html = ""
          for (var i = 0, n = data.length; i < n; ++i) {
            var item = data[i];
            content_html += `<tr><td><a href="bvo-goodsdetail.html">` + item.name 
            + `</a></td><td>$` +item.price + `</td><td class="hidden-480">` + item.number 
            +`</td><td>` + item.sku + `</td><td>$` + item.price * item.number + `</td><td>` 
            + item.id + `</td><td class="hidden-480"><a href="bvo-ordertracking.html?tno=`  
            + item.trackingno + `">` + item.trackingno + `</a></td></tr>`
          }
          $("#shipped-body").html(content_html)
        })


        // get completed orders
       
        $.get("completed.borrow", function(data, status) {
          data = JSON.parse(data)
        //   var data = [
        //   {
        //     "title": "ace.com",
        //     "price": 45,
        //     "QTY": 3,
        //     "sku": "Gm7643377",
        //     "orderNo": "546738788",
        //     "total": 135,
        //     "trackingno": "46578990890"
        //   }
        // ]
          var content_html = ""
          for (var i = 0, n = data.length; i < n; ++i) {
            var item = data[i];
            content_html += `<tr><td><a href="bvo-goodsdetail.html">` + item.name 
            + `</a></td><td>$` +item.price + `</td><td class="hidden-480">` + item.number 
            +`</td><td>` + item.sku + `</td><td>$` + item.price * item.number + `</td><td>` 
            + item.id + `</td><td class="hidden-480"><a href="bvo-ordertracking.html?tno=`  
            + item.trackingno + `">` + item.trackingno + `</a></td></tr>`
          }
          $("#completed-orders-body").html(content_html)
        })

        // get cancelled orders
        $.get("cancelled.borrow", function(data, status) {
          data = JSON.parse(data)
          // var data = [
          //   {
          //     "title": "base.com",
          //     "price": 35,
          //     "QTY": 20,
          //     "sku": "Gm356677",
          //     "total": 7000,
          //     "orderno": "543678788"
          //   }
          // ]
            var content_html = ""
            for (var i = 0, n = data.length; i < n; ++i) {
              var item = data[i];
              content_html += `<tr><td><a href="bvo-goodsdetail.html">`
              + item.name + `</a></td><td>$` + item.price + `</td><td class="hidden-480">`
              + item.number + `</td><td>` + item.sku + `</td><td>$` + item.price * item.number + `</td><td>` 
              + item.id + `</td></tr>`
            }
            $("#cancelled-orders-body").html(content_html)
        })
        $('.ace-checkbox-2').each(function(){
              $('.ace-checkbox-2').change(function(){
                if($(this).prop('checked')){
                 $(this).parents('.tab-pane').find('.input').prop('checked',true);
               }else{
                $(this).parents('.tab-pane').find('.input').prop('checked',false);
              }
          })

        })

})



    </script>
    </body>
</html>
